"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/webscraper/route";
exports.ids = ["app/api/webscraper/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebscraper%2Froute&page=%2Fapi%2Fwebscraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebscraper%2Froute.ts&appDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebscraper%2Froute&page=%2Fapi%2Fwebscraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebscraper%2Froute.ts&appDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_Davino_Desktop_ProjectAtlasFixed2_frontend_app_api_webscraper_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/webscraper/route.ts */ \"(rsc)/./app/api/webscraper/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/webscraper/route\",\n        pathname: \"/api/webscraper\",\n        filename: \"route\",\n        bundlePath: \"app/api/webscraper/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Davino\\\\Desktop\\\\ProjectAtlasFixed2\\\\frontend\\\\app\\\\api\\\\webscraper\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Davino_Desktop_ProjectAtlasFixed2_frontend_app_api_webscraper_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/webscraper/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3ZWJzY3JhcGVyJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ3ZWJzY3JhcGVyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGd2Vic2NyYXBlciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNEYXZpbm8lNUNEZXNrdG9wJTVDUHJvamVjdEF0bGFzRml4ZWQyJTVDZnJvbnRlbmQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0RhdmlubyU1Q0Rlc2t0b3AlNUNQcm9qZWN0QXRsYXNGaXhlZDIlNUNmcm9udGVuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNzRDtBQUN2QztBQUNzRDtBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0LWF0bGFzLWZyb250ZW5kLz81ZmNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIm5leHQvZGlzdC9zZXJ2ZXIvbm9kZS1wb2x5ZmlsbC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxEYXZpbm9cXFxcRGVza3RvcFxcXFxQcm9qZWN0QXRsYXNGaXhlZDJcXFxcZnJvbnRlbmRcXFxcYXBwXFxcXGFwaVxcXFx3ZWJzY3JhcGVyXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93ZWJzY3JhcGVyL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvd2Vic2NyYXBlclwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd2Vic2NyYXBlci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXERhdmlub1xcXFxEZXNrdG9wXFxcXFByb2plY3RBdGxhc0ZpeGVkMlxcXFxmcm9udGVuZFxcXFxhcHBcXFxcYXBpXFxcXHdlYnNjcmFwZXJcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvd2Vic2NyYXBlci9yb3V0ZVwiO1xuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebscraper%2Froute&page=%2Fapi%2Fwebscraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebscraper%2Froute.ts&appDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/webscraper/route.ts":
/*!*************************************!*\
  !*** ./app/api/webscraper/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\n\n\n// Initialize OpenAI client (for AI scoring)\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY || \"\"\n});\n// Define the URL for our scraper service\nconst SCRAPER_SERVICE_URL = process.env.SCRAPER_SERVICE_URL || \"http://localhost:3001\";\n// Mock data for property analysis for Spanish properties (fallback)\nconst mockSpanishPropertyData = {\n    propertyAddress: \"Calle Gran V\\xeda 28, Madrid, Espa\\xf1a\",\n    marketTrends: {\n        priceHistory: [\n            {\n                date: \"2023-01\",\n                price: 380000\n            },\n            {\n                date: \"2023-04\",\n                price: 395000\n            },\n            {\n                date: \"2023-07\",\n                price: 410000\n            },\n            {\n                date: \"2023-10\",\n                price: 425000\n            },\n            {\n                date: \"2024-01\",\n                price: 440000\n            },\n            {\n                date: \"2024-04\",\n                price: 450000\n            }\n        ],\n        rentalYield: 5.2,\n        areaGrowth: 4.8,\n        similarProperties: [\n            {\n                address: \"Calle Gran V\\xeda 30\",\n                price: 465000,\n                sqft: 95,\n                pricePerSqft: 4895\n            },\n            {\n                address: \"Calle Princesa 15\",\n                price: 445000,\n                sqft: 90,\n                pricePerSqft: 4944\n            },\n            {\n                address: \"Plaza Espa\\xf1a 4\",\n                price: 490000,\n                sqft: 100,\n                pricePerSqft: 4900\n            }\n        ]\n    },\n    locationAnalysis: {\n        walkScore: 95,\n        transitScore: 98,\n        crimeRate: \"Low\",\n        schools: [\n            {\n                name: \"Colegio San Isidro\",\n                rating: 8.2,\n                distance: 0.5\n            },\n            {\n                name: \"IES Lope de Vega\",\n                rating: 7.8,\n                distance: 0.7\n            },\n            {\n                name: \"Colegio Santa Mar\\xeda\",\n                rating: 8.5,\n                distance: 1.1\n            }\n        ],\n        amenities: {\n            restaurants: 35,\n            shopping: 28,\n            parks: 3,\n            healthcare: 8\n        }\n    },\n    financialMetrics: {\n        purchasePrice: 450000,\n        estimatedMonthlyRent: 1950,\n        annualRentalIncome: 23400,\n        expenses: {\n            propertyTax: 1800,\n            insurance: 950,\n            maintenance: 2700,\n            managementFees: 2340\n        },\n        netOperatingIncome: 15610,\n        capRate: 3.47,\n        cashOnCashReturn: 5.82,\n        breakEvenOccupancy: 65,\n        appreciationForecast: 3.9\n    },\n    riskAssessment: {\n        overall: \"Low\",\n        vacancyRisk: \"Very Low\",\n        maintenanceRisk: \"Low\",\n        regulatoryRisk: \"Medium\",\n        marketVolatilityRisk: \"Low\",\n        score: 85\n    }\n};\n/**\r\n * Analyze property data using our real scraper service\r\n * @param url - The property URL\r\n * @param platform - The platform (idealista, fotocasa, habitaclia)\r\n * @param useMockData - Whether to use mock data\r\n * @returns Property analysis data\r\n */ async function analyzePropertyWithScraperService(url, platform, useMockData = false) {\n    try {\n        // Call our dedicated scraper service\n        const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${SCRAPER_SERVICE_URL}/api/property-analysis`, {\n            url,\n            platform,\n            useMockData\n        }, {\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            timeout: 60000 // 60 second timeout for scraping\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error calling scraper service:\", error.message);\n        // If the scraper service is unavailable, use fallback mode\n        if (error.code === \"ECONNREFUSED\" || error.code === \"ETIMEDOUT\" || error.response?.status >= 500) {\n            console.warn(\"Scraper service unavailable, using fallback mode\");\n            return fallbackAnalysis(url, platform);\n        }\n        throw error;\n    }\n}\n/**\r\n * Fallback analysis when scraper service is unavailable\r\n */ async function fallbackAnalysis(url, platform) {\n    console.log(\"Using fallback analysis with mock data\");\n    // Use the mock data with some adjustments based on platform\n    const mockData = {\n        ...mockSpanishPropertyData,\n        propertyAddress: `${platform.charAt(0).toUpperCase() + platform.slice(1)} Property, ${url.includes(\"madrid\") ? \"Madrid\" : url.includes(\"barcelona\") ? \"Barcelona\" : \"Espa\\xf1a\"}`,\n        financialMetrics: {\n            ...mockSpanishPropertyData.financialMetrics,\n            // Adjust the price based on the platform for variety\n            purchasePrice: platform === \"idealista\" ? 450000 : platform === \"fotocasa\" ? 395000 : 420000\n        }\n    };\n    // Call OpenAI to analyze if available\n    let aiAnalysis = {\n        score: 85,\n        analysis: \"This is a mock analysis using fallback data.\"\n    };\n    if (process.env.OPENAI_API_KEY) {\n        try {\n            const response = await openai.chat.completions.create({\n                model: \"gpt-4-turbo\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a real estate investment analysis AI. Analyze the property data and provide an investment score from 0-100 based on rental yield, location quality, and risk assessment.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: `Analyze this Spanish property as an investment:\\n${JSON.stringify(mockData, null, 2)}`\n                    }\n                ],\n                temperature: 0.5,\n                max_tokens: 500\n            });\n            const aiResponse = response.choices[0]?.message?.content || \"\";\n            const scoreMatch = aiResponse.match(/score.*?(\\d+)/i);\n            if (scoreMatch && scoreMatch[1]) {\n                aiAnalysis = {\n                    score: parseInt(scoreMatch[1]),\n                    analysis: aiResponse\n                };\n            }\n        } catch (error) {\n            console.error(\"Error calling OpenAI:\", error);\n        }\n    }\n    // Add AI score to the mock data\n    const enhancedPropertyData = {\n        ...mockData,\n        atlasScore: aiAnalysis.score,\n        aiAnalysis: aiAnalysis.analysis\n    };\n    return {\n        success: true,\n        message: \"Property analysis completed (fallback mode)\",\n        data: {\n            url,\n            scrapedAt: new Date().toISOString(),\n            propertyDetails: enhancedPropertyData,\n            platform,\n            isFallback: true\n        }\n    };\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { url, platform, useMockData } = body;\n        if (!url && !useMockData) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                message: \"URL is required\",\n                error: \"Missing URL\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`Processing property analysis for ${platform} URL: ${url}`);\n        // Call our scraper service to analyze the property\n        const result = await analyzePropertyWithScraperService(url, platform, useMockData);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result);\n    } catch (error) {\n        console.error(\"API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            message: \"Error processing request\",\n            error: String(error)\n        }, {\n            status: 500\n        });\n    }\n}\n// Keep the GET method for compatibility\nasync function GET(request) {\n    const searchParams = request.nextUrl.searchParams;\n    const propertyAddress = searchParams.get(\"address\");\n    // Simple response for GET requests (for testing)\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: true,\n        message: \"Property analysis completed\",\n        data: {\n            ...mockSpanishPropertyData,\n            propertyAddress: propertyAddress || mockSpanishPropertyData.propertyAddress,\n            analysisDate: new Date().toISOString(),\n            atlasScore: 85,\n            note: \"This is mock data. For real analysis, use POST request with a property URL.\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMwRyxJQUFJLENBQ3RCO1lBQUVULFNBQVM7WUFBTy9CLFNBQVM7WUFBNEJGLE9BQU80QyxPQUFPNUM7UUFBTyxHQUM1RTtZQUFFSSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLHdDQUF3QztBQUNqQyxlQUFleUMsSUFBSUwsT0FBb0I7SUFDNUMsTUFBTU0sZUFBZU4sUUFBUU8sT0FBTyxDQUFDRCxZQUFZO0lBQ2pELE1BQU1wRyxrQkFBa0JvRyxhQUFhRSxHQUFHLENBQUM7SUFFekMsaURBQWlEO0lBQ2pELE9BQU9oSCxrRkFBWUEsQ0FBQzBHLElBQUksQ0FBQztRQUN2QlQsU0FBUztRQUNUL0IsU0FBUztRQUNUSCxNQUFNO1lBQ0osR0FBR3RELHVCQUF1QjtZQUMxQkMsaUJBQWlCQSxtQkFBbUJELHdCQUF3QkMsZUFBZTtZQUMzRXVHLGNBQWMsSUFBSWQsT0FBT0MsV0FBVztZQUNwQ0osWUFBWTtZQUNaa0IsTUFBTTtRQUNSO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2plY3QtYXRsYXMtZnJvbnRlbmQvLi9hcHAvYXBpL3dlYnNjcmFwZXIvcm91dGUudHM/YjdjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcblxyXG4vLyBJbml0aWFsaXplIE9wZW5BSSBjbGllbnQgKGZvciBBSSBzY29yaW5nKVxyXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcclxuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIHx8ICcnLCAvLyBBZGQgeW91ciBBUEkga2V5IGluIC5lbnYubG9jYWwgZmlsZVxyXG59KTtcclxuXHJcbi8vIERlZmluZSB0aGUgVVJMIGZvciBvdXIgc2NyYXBlciBzZXJ2aWNlXHJcbmNvbnN0IFNDUkFQRVJfU0VSVklDRV9VUkwgPSBwcm9jZXNzLmVudi5TQ1JBUEVSX1NFUlZJQ0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xyXG5cclxuLy8gTW9jayBkYXRhIGZvciBwcm9wZXJ0eSBhbmFseXNpcyBmb3IgU3BhbmlzaCBwcm9wZXJ0aWVzIChmYWxsYmFjaylcclxuY29uc3QgbW9ja1NwYW5pc2hQcm9wZXJ0eURhdGEgPSB7XHJcbiAgcHJvcGVydHlBZGRyZXNzOiAnQ2FsbGUgR3JhbiBWw61hIDI4LCBNYWRyaWQsIEVzcGHDsWEnLFxyXG4gIG1hcmtldFRyZW5kczoge1xyXG4gICAgcHJpY2VIaXN0b3J5OiBbXHJcbiAgICAgIHsgZGF0ZTogJzIwMjMtMDEnLCBwcmljZTogMzgwMDAwIH0sXHJcbiAgICAgIHsgZGF0ZTogJzIwMjMtMDQnLCBwcmljZTogMzk1MDAwIH0sXHJcbiAgICAgIHsgZGF0ZTogJzIwMjMtMDcnLCBwcmljZTogNDEwMDAwIH0sXHJcbiAgICAgIHsgZGF0ZTogJzIwMjMtMTAnLCBwcmljZTogNDI1MDAwIH0sXHJcbiAgICAgIHsgZGF0ZTogJzIwMjQtMDEnLCBwcmljZTogNDQwMDAwIH0sXHJcbiAgICAgIHsgZGF0ZTogJzIwMjQtMDQnLCBwcmljZTogNDUwMDAwIH0sXHJcbiAgICBdLFxyXG4gICAgcmVudGFsWWllbGQ6IDUuMixcclxuICAgIGFyZWFHcm93dGg6IDQuOCxcclxuICAgIHNpbWlsYXJQcm9wZXJ0aWVzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBhZGRyZXNzOiAnQ2FsbGUgR3JhbiBWw61hIDMwJyxcclxuICAgICAgICBwcmljZTogNDY1MDAwLFxyXG4gICAgICAgIHNxZnQ6IDk1LFxyXG4gICAgICAgIHByaWNlUGVyU3FmdDogNDg5NVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYWRkcmVzczogJ0NhbGxlIFByaW5jZXNhIDE1JyxcclxuICAgICAgICBwcmljZTogNDQ1MDAwLFxyXG4gICAgICAgIHNxZnQ6IDkwLFxyXG4gICAgICAgIHByaWNlUGVyU3FmdDogNDk0NFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYWRkcmVzczogJ1BsYXphIEVzcGHDsWEgNCcsXHJcbiAgICAgICAgcHJpY2U6IDQ5MDAwMCxcclxuICAgICAgICBzcWZ0OiAxMDAsXHJcbiAgICAgICAgcHJpY2VQZXJTcWZ0OiA0OTAwXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIGxvY2F0aW9uQW5hbHlzaXM6IHtcclxuICAgIHdhbGtTY29yZTogOTUsXHJcbiAgICB0cmFuc2l0U2NvcmU6IDk4LFxyXG4gICAgY3JpbWVSYXRlOiAnTG93JyxcclxuICAgIHNjaG9vbHM6IFtcclxuICAgICAgeyBuYW1lOiAnQ29sZWdpbyBTYW4gSXNpZHJvJywgcmF0aW5nOiA4LjIsIGRpc3RhbmNlOiAwLjUgfSxcclxuICAgICAgeyBuYW1lOiAnSUVTIExvcGUgZGUgVmVnYScsIHJhdGluZzogNy44LCBkaXN0YW5jZTogMC43IH0sXHJcbiAgICAgIHsgbmFtZTogJ0NvbGVnaW8gU2FudGEgTWFyw61hJywgcmF0aW5nOiA4LjUsIGRpc3RhbmNlOiAxLjEgfVxyXG4gICAgXSxcclxuICAgIGFtZW5pdGllczoge1xyXG4gICAgICByZXN0YXVyYW50czogMzUsXHJcbiAgICAgIHNob3BwaW5nOiAyOCxcclxuICAgICAgcGFya3M6IDMsXHJcbiAgICAgIGhlYWx0aGNhcmU6IDhcclxuICAgIH1cclxuICB9LFxyXG4gIGZpbmFuY2lhbE1ldHJpY3M6IHtcclxuICAgIHB1cmNoYXNlUHJpY2U6IDQ1MDAwMCxcclxuICAgIGVzdGltYXRlZE1vbnRobHlSZW50OiAxOTUwLFxyXG4gICAgYW5udWFsUmVudGFsSW5jb21lOiAyMzQwMCxcclxuICAgIGV4cGVuc2VzOiB7XHJcbiAgICAgIHByb3BlcnR5VGF4OiAxODAwLFxyXG4gICAgICBpbnN1cmFuY2U6IDk1MCxcclxuICAgICAgbWFpbnRlbmFuY2U6IDI3MDAsXHJcbiAgICAgIG1hbmFnZW1lbnRGZWVzOiAyMzQwXHJcbiAgICB9LFxyXG4gICAgbmV0T3BlcmF0aW5nSW5jb21lOiAxNTYxMCxcclxuICAgIGNhcFJhdGU6IDMuNDcsXHJcbiAgICBjYXNoT25DYXNoUmV0dXJuOiA1LjgyLFxyXG4gICAgYnJlYWtFdmVuT2NjdXBhbmN5OiA2NSxcclxuICAgIGFwcHJlY2lhdGlvbkZvcmVjYXN0OiAzLjlcclxuICB9LFxyXG4gIHJpc2tBc3Nlc3NtZW50OiB7XHJcbiAgICBvdmVyYWxsOiAnTG93JyxcclxuICAgIHZhY2FuY3lSaXNrOiAnVmVyeSBMb3cnLFxyXG4gICAgbWFpbnRlbmFuY2VSaXNrOiAnTG93JyxcclxuICAgIHJlZ3VsYXRvcnlSaXNrOiAnTWVkaXVtJyxcclxuICAgIG1hcmtldFZvbGF0aWxpdHlSaXNrOiAnTG93JyxcclxuICAgIHNjb3JlOiA4NVxyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBBbmFseXplIHByb3BlcnR5IGRhdGEgdXNpbmcgb3VyIHJlYWwgc2NyYXBlciBzZXJ2aWNlXHJcbiAqIEBwYXJhbSB1cmwgLSBUaGUgcHJvcGVydHkgVVJMXHJcbiAqIEBwYXJhbSBwbGF0Zm9ybSAtIFRoZSBwbGF0Zm9ybSAoaWRlYWxpc3RhLCBmb3RvY2FzYSwgaGFiaXRhY2xpYSlcclxuICogQHBhcmFtIHVzZU1vY2tEYXRhIC0gV2hldGhlciB0byB1c2UgbW9jayBkYXRhXHJcbiAqIEByZXR1cm5zIFByb3BlcnR5IGFuYWx5c2lzIGRhdGFcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFuYWx5emVQcm9wZXJ0eVdpdGhTY3JhcGVyU2VydmljZSh1cmw6IHN0cmluZywgcGxhdGZvcm06IHN0cmluZywgdXNlTW9ja0RhdGE6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDYWxsIG91ciBkZWRpY2F0ZWQgc2NyYXBlciBzZXJ2aWNlXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7U0NSQVBFUl9TRVJWSUNFX1VSTH0vYXBpL3Byb3BlcnR5LWFuYWx5c2lzYCwge1xyXG4gICAgICB1cmwsXHJcbiAgICAgIHBsYXRmb3JtLFxyXG4gICAgICB1c2VNb2NrRGF0YVxyXG4gICAgfSwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICB0aW1lb3V0OiA2MDAwMCAvLyA2MCBzZWNvbmQgdGltZW91dCBmb3Igc2NyYXBpbmdcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIHNjcmFwZXIgc2VydmljZTonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIFxyXG4gICAgLy8gSWYgdGhlIHNjcmFwZXIgc2VydmljZSBpcyB1bmF2YWlsYWJsZSwgdXNlIGZhbGxiYWNrIG1vZGVcclxuICAgIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5SRUZVU0VEJyB8fCBlcnJvci5jb2RlID09PSAnRVRJTUVET1VUJyB8fCBlcnJvci5yZXNwb25zZT8uc3RhdHVzID49IDUwMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1NjcmFwZXIgc2VydmljZSB1bmF2YWlsYWJsZSwgdXNpbmcgZmFsbGJhY2sgbW9kZScpO1xyXG4gICAgICByZXR1cm4gZmFsbGJhY2tBbmFseXNpcyh1cmwsIHBsYXRmb3JtKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRmFsbGJhY2sgYW5hbHlzaXMgd2hlbiBzY3JhcGVyIHNlcnZpY2UgaXMgdW5hdmFpbGFibGVcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZhbGxiYWNrQW5hbHlzaXModXJsOiBzdHJpbmcsIHBsYXRmb3JtOiBzdHJpbmcpIHtcclxuICBjb25zb2xlLmxvZygnVXNpbmcgZmFsbGJhY2sgYW5hbHlzaXMgd2l0aCBtb2NrIGRhdGEnKTtcclxuICBcclxuICAvLyBVc2UgdGhlIG1vY2sgZGF0YSB3aXRoIHNvbWUgYWRqdXN0bWVudHMgYmFzZWQgb24gcGxhdGZvcm1cclxuICBjb25zdCBtb2NrRGF0YSA9IHtcclxuICAgIC4uLm1vY2tTcGFuaXNoUHJvcGVydHlEYXRhLFxyXG4gICAgcHJvcGVydHlBZGRyZXNzOiBgJHtwbGF0Zm9ybS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBsYXRmb3JtLnNsaWNlKDEpfSBQcm9wZXJ0eSwgJHt1cmwuaW5jbHVkZXMoJ21hZHJpZCcpID8gJ01hZHJpZCcgOiB1cmwuaW5jbHVkZXMoJ2JhcmNlbG9uYScpID8gJ0JhcmNlbG9uYScgOiAnRXNwYcOxYSd9YCxcclxuICAgIGZpbmFuY2lhbE1ldHJpY3M6IHtcclxuICAgICAgLi4ubW9ja1NwYW5pc2hQcm9wZXJ0eURhdGEuZmluYW5jaWFsTWV0cmljcyxcclxuICAgICAgLy8gQWRqdXN0IHRoZSBwcmljZSBiYXNlZCBvbiB0aGUgcGxhdGZvcm0gZm9yIHZhcmlldHlcclxuICAgICAgcHVyY2hhc2VQcmljZTogcGxhdGZvcm0gPT09ICdpZGVhbGlzdGEnID8gNDUwMDAwIDogcGxhdGZvcm0gPT09ICdmb3RvY2FzYScgPyAzOTUwMDAgOiA0MjAwMDAsXHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICAvLyBDYWxsIE9wZW5BSSB0byBhbmFseXplIGlmIGF2YWlsYWJsZVxyXG4gIGxldCBhaUFuYWx5c2lzID0ge1xyXG4gICAgc2NvcmU6IDg1LFxyXG4gICAgYW5hbHlzaXM6IFwiVGhpcyBpcyBhIG1vY2sgYW5hbHlzaXMgdXNpbmcgZmFsbGJhY2sgZGF0YS5cIlxyXG4gIH07XHJcbiAgXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgICAgbW9kZWw6IFwiZ3B0LTQtdHVyYm9cIixcclxuICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxyXG4gICAgICAgICAgICBjb250ZW50OiBcIllvdSBhcmUgYSByZWFsIGVzdGF0ZSBpbnZlc3RtZW50IGFuYWx5c2lzIEFJLiBBbmFseXplIHRoZSBwcm9wZXJ0eSBkYXRhIGFuZCBwcm92aWRlIGFuIGludmVzdG1lbnQgc2NvcmUgZnJvbSAwLTEwMCBiYXNlZCBvbiByZW50YWwgeWllbGQsIGxvY2F0aW9uIHF1YWxpdHksIGFuZCByaXNrIGFzc2Vzc21lbnQuXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgICAgICAgICBjb250ZW50OiBgQW5hbHl6ZSB0aGlzIFNwYW5pc2ggcHJvcGVydHkgYXMgYW4gaW52ZXN0bWVudDpcXG4ke0pTT04uc3RyaW5naWZ5KG1vY2tEYXRhLCBudWxsLCAyKX1gXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICB0ZW1wZXJhdHVyZTogMC41LFxyXG4gICAgICAgIG1heF90b2tlbnM6IDUwMCxcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBhaVJlc3BvbnNlID0gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAnJztcclxuICAgICAgY29uc3Qgc2NvcmVNYXRjaCA9IGFpUmVzcG9uc2UubWF0Y2goL3Njb3JlLio/KFxcZCspL2kpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHNjb3JlTWF0Y2ggJiYgc2NvcmVNYXRjaFsxXSkge1xyXG4gICAgICAgIGFpQW5hbHlzaXMgPSB7XHJcbiAgICAgICAgICBzY29yZTogcGFyc2VJbnQoc2NvcmVNYXRjaFsxXSksXHJcbiAgICAgICAgICBhbmFseXNpczogYWlSZXNwb25zZVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYWxsaW5nIE9wZW5BSTpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBBZGQgQUkgc2NvcmUgdG8gdGhlIG1vY2sgZGF0YVxyXG4gIGNvbnN0IGVuaGFuY2VkUHJvcGVydHlEYXRhID0ge1xyXG4gICAgLi4ubW9ja0RhdGEsXHJcbiAgICBhdGxhc1Njb3JlOiBhaUFuYWx5c2lzLnNjb3JlLFxyXG4gICAgYWlBbmFseXNpczogYWlBbmFseXNpcy5hbmFseXNpc1xyXG4gIH07XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICBtZXNzYWdlOiAnUHJvcGVydHkgYW5hbHlzaXMgY29tcGxldGVkIChmYWxsYmFjayBtb2RlKScsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgIHVybCxcclxuICAgICAgc2NyYXBlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHByb3BlcnR5RGV0YWlsczogZW5oYW5jZWRQcm9wZXJ0eURhdGEsXHJcbiAgICAgIHBsYXRmb3JtLFxyXG4gICAgICBpc0ZhbGxiYWNrOiB0cnVlXHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3QgeyB1cmwsIHBsYXRmb3JtLCB1c2VNb2NrRGF0YSB9ID0gYm9keTtcclxuICAgIFxyXG4gICAgaWYgKCF1cmwgJiYgIXVzZU1vY2tEYXRhKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVVJMIGlzIHJlcXVpcmVkJywgZXJyb3I6ICdNaXNzaW5nIFVSTCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgcHJvcGVydHkgYW5hbHlzaXMgZm9yICR7cGxhdGZvcm19IFVSTDogJHt1cmx9YCk7XHJcbiAgICBcclxuICAgIC8vIENhbGwgb3VyIHNjcmFwZXIgc2VydmljZSB0byBhbmFseXplIHRoZSBwcm9wZXJ0eVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZVByb3BlcnR5V2l0aFNjcmFwZXJTZXJ2aWNlKHVybCwgcGxhdGZvcm0sIHVzZU1vY2tEYXRhKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCk7XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiQVBJIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBwcm9jZXNzaW5nIHJlcXVlc3QnLCBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBLZWVwIHRoZSBHRVQgbWV0aG9kIGZvciBjb21wYXRpYmlsaXR5XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zO1xyXG4gIGNvbnN0IHByb3BlcnR5QWRkcmVzcyA9IHNlYXJjaFBhcmFtcy5nZXQoJ2FkZHJlc3MnKTtcclxuICBcclxuICAvLyBTaW1wbGUgcmVzcG9uc2UgZm9yIEdFVCByZXF1ZXN0cyAoZm9yIHRlc3RpbmcpXHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICBtZXNzYWdlOiAnUHJvcGVydHkgYW5hbHlzaXMgY29tcGxldGVkJyxcclxuICAgIGRhdGE6IHtcclxuICAgICAgLi4ubW9ja1NwYW5pc2hQcm9wZXJ0eURhdGEsXHJcbiAgICAgIHByb3BlcnR5QWRkcmVzczogcHJvcGVydHlBZGRyZXNzIHx8IG1vY2tTcGFuaXNoUHJvcGVydHlEYXRhLnByb3BlcnR5QWRkcmVzcyxcclxuICAgICAgYW5hbHlzaXNEYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGF0bGFzU2NvcmU6IDg1LFxyXG4gICAgICBub3RlOiBcIlRoaXMgaXMgbW9jayBkYXRhLiBGb3IgcmVhbCBhbmFseXNpcywgdXNlIFBPU1QgcmVxdWVzdCB3aXRoIGEgcHJvcGVydHkgVVJMLlwiXHJcbiAgICB9XHJcbiAgfSk7XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsImF4aW9zIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiU0NSQVBFUl9TRVJWSUNFX1VSTCIsIm1vY2tTcGFuaXNoUHJvcGVydHlEYXRhIiwicHJvcGVydHlBZGRyZXNzIiwibWFya2V0VHJlbmRzIiwicHJpY2VIaXN0b3J5IiwiZGF0ZSIsInByaWNlIiwicmVudGFsWWllbGQiLCJhcmVhR3Jvd3RoIiwic2ltaWxhclByb3BlcnRpZXMiLCJhZGRyZXNzIiwic3FmdCIsInByaWNlUGVyU3FmdCIsImxvY2F0aW9uQW5hbHlzaXMiLCJ3YWxrU2NvcmUiLCJ0cmFuc2l0U2NvcmUiLCJjcmltZVJhdGUiLCJzY2hvb2xzIiwibmFtZSIsInJhdGluZyIsImRpc3RhbmNlIiwiYW1lbml0aWVzIiwicmVzdGF1cmFudHMiLCJzaG9wcGluZyIsInBhcmtzIiwiaGVhbHRoY2FyZSIsImZpbmFuY2lhbE1ldHJpY3MiLCJwdXJjaGFzZVByaWNlIiwiZXN0aW1hdGVkTW9udGhseVJlbnQiLCJhbm51YWxSZW50YWxJbmNvbWUiLCJleHBlbnNlcyIsInByb3BlcnR5VGF4IiwiaW5zdXJhbmNlIiwibWFpbnRlbmFuY2UiLCJtYW5hZ2VtZW50RmVlcyIsIm5ldE9wZXJhdGluZ0luY29tZSIsImNhcFJhdGUiLCJjYXNoT25DYXNoUmV0dXJuIiwiYnJlYWtFdmVuT2NjdXBhbmN5IiwiYXBwcmVjaWF0aW9uRm9yZWNhc3QiLCJyaXNrQXNzZXNzbWVudCIsIm92ZXJhbGwiLCJ2YWNhbmN5UmlzayIsIm1haW50ZW5hbmNlUmlzayIsInJlZ3VsYXRvcnlSaXNrIiwibWFya2V0Vm9sYXRpbGl0eVJpc2siLCJzY29yZSIsImFuYWx5emVQcm9wZXJ0eVdpdGhTY3JhcGVyU2VydmljZSIsInVybCIsInBsYXRmb3JtIiwidXNlTW9ja0RhdGEiLCJyZXNwb25zZSIsInBvc3QiLCJoZWFkZXJzIiwidGltZW91dCIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiY29kZSIsInN0YXR1cyIsIndhcm4iLCJmYWxsYmFja0FuYWx5c2lzIiwibG9nIiwibW9ja0RhdGEiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiaW5jbHVkZXMiLCJhaUFuYWx5c2lzIiwiYW5hbHlzaXMiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwiYWlSZXNwb25zZSIsImNob2ljZXMiLCJzY29yZU1hdGNoIiwibWF0Y2giLCJwYXJzZUludCIsImVuaGFuY2VkUHJvcGVydHlEYXRhIiwiYXRsYXNTY29yZSIsInN1Y2Nlc3MiLCJzY3JhcGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcm9wZXJ0eURldGFpbHMiLCJpc0ZhbGxiYWNrIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsInJlc3VsdCIsIlN0cmluZyIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIm5leHRVcmwiLCJnZXQiLCJhbmFseXNpc0RhdGUiLCJub3RlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/webscraper/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/axios","vendor-chunks/form-data-encoder","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/whatwg-url","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/agentkeepalive","vendor-chunks/get-proto","vendor-chunks/tr46","vendor-chunks/mime-db","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/web-streams-polyfill","vendor-chunks/webidl-conversions","vendor-chunks/supports-color","vendor-chunks/proxy-from-env","vendor-chunks/node-fetch","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/humanize-ms","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/get-intrinsic","vendor-chunks/event-target-shim","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebscraper%2Froute&page=%2Fapi%2Fwebscraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebscraper%2Froute.ts&appDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDavino%5CDesktop%5CProjectAtlasFixed2%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();